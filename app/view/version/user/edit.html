{% extends "_layout.html" %}
{% import "component/forms.njk" as forms %}

{# 样式代码 #}
{% block style %}
<link href="/css/plugins/iCheck/custom.css" rel="stylesheet">
<style>

</style>
{% endblock %}

{# bodyd代码#}
{% block body %}
<div class="wrapper wrapper-content">
    <div class="row">
        <div class="col-sm-12">
            <div class="ibox float-e-margins">
                <div class="ibox-title">
                    <h5>添加用户端版本信息</h5>
                </div>
                <div class="ibox-content">
                    <form class="form-horizontal m-t from" id="form" action="/version/user/edit" method="post"
                          data-href="/version/user">
                        {{ forms.number('版本号', 'number', '', '请输入版本号，当前版本号：'+data.number, 'required') }}
                        <input name="type" value="{{ params.type }}" type="text" hidden>
                        {{ forms.textarea('更新信息', 'info', '', '请输入更新信息', 'required') }}
                        {{ forms.text('apk下载地址', 'apkUrl', '', '请输入apk下载地址', 'required') }}
                        {{ forms.radios('是否强制更新：', 'isForce', [{text: '是', value: true}, {text: '否', value: false}], '请输入是否需要强制更新') }}
                        <td>{{ item.number }}</td>
                        <td>{{ item.info }}</td>
                        <td>
                            {% if item.isForce == true %}
                            是
                            {% elseif item.isForce == false %}
                            否
                            {% else %}
                            {% endif %}
                        </td>
                        <div style="position: relative;">
                            <a href="/version/user" class="btn btn-info"
                               style="position: absolute;right: 26%;top: 0;">返回</a>
                            {{ forms.submit() }}
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
    
    {% endblock %}

    {#js代码#}
    {% block js %}
    <script>
      $(function () {
        var e = "";
        $("#form").validate({
          rules: {
            name: "required",
            jingle: "required",
            price: "required",
            promotionPrice: "required",
            marketPrice: "required",
            serial: "required",
            spec: "required",
            storage: "required",
            createTime: "required",
            specValue: "required",
            alarm: "required",
            sku: "required",
            image: "required",
            images: "required",
          },
          messages: {
            name: {
              required: e + "请输入商品名称（+规格名称）"
            },
            jingle: {
              required: e + "请输入商品广告词"
            },
            price: {
              required: e + "请输入商品价格"
            },
            promotionPrice: {
              required: e + "请输入商品促销价格"
            },
            marketPrice: {
              required: e + "请输入市场价"
            },
            serial: {
              required: e + "请输入商家编号"
            },
            spec: {
              required: e + "请输入商品规格序列化"
            },
            storage: {
              required: e + "请输入商品库存"
            },
            createTime: {
              required: e + "请输入商品添加时间"
            },
            specValue: {
              required: e + "请输入商品规格序列化"
            },
            alarm: {
              required: e + "请输入预警值"
            },
            sku: {
              required: e + "请输入sku"
            },
            image: {
              required: e + "请输入商品首图"
            },
            images: {
              required: e + "请输入商品图片"
            },
          },
          submitHandler: function () {
            asyncSubmitForm($("#form"));
          }
        });
      });
    </script>
    <script>

      console.log($("textarea").attr('name'));
      number = $("textarea").text();
      if (parseFloat(number) > parseFloat(xxxx)) {

      }

      $('textarea').bind('input propertychange', function () {
        if ($(".textareachange").val() != "") {
          jQuery.validator.addMethod("isFloat", function (value, element) {
            return this.optional(element) || /^[-\+]?\d+(\.\d+)?$/.test(value);
          }, "只能包含数字、小数点等字符");
        } else {
          console.log('请输入小数点')
        }
        ;
      });

      // 判断浮点型

    </script>
    {% endblock %}