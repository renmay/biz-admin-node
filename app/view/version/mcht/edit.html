{% extends "_layout.html" %}
{% import "component/forms.njk" as forms %}

{# 样式代码 #}
{% block style %}
<link href="/css/plugins/iCheck/custom.css" rel="stylesheet">
{% endblock %}

{# bodyd代码#}
{% block body %}
<div class="wrapper wrapper-content">
    <div class="row">
        <div class="col-sm-12">
            <div class="ibox float-e-margins">
                <div class="ibox-title">
                    <h5>添加商家端版本信息</h5>
                </div>
                <div class="ibox-content">
                    <form class="form-horizontal m-t from" id="form" action="/version/mcht/edit" method="post" data-href="/version/mcht">
                        {{ forms.number('版本号', 'number', '', '请输入版本号，当前版本号：'+data.number, 'required') }}
                        <input name="type" value="{{ params.type }}" type="text" hidden>
                        {{ forms.textarea('更新信息', 'info', '', '请输入更新信息', 'required') }}
                        {{ forms.text('apk下载地址', 'apkUrl', '', '请输入apk下载地址', 'required') }}
                        {{ forms.radios('是否强制更新：', 'isForce', [{text: '是', value: true}, {text: '否', value: false}], '请输入是否需要强制更新') }}
                        <td>{{ item.number }}</td>
                        <td>{{ item.info }}</td>
                        <td>
                            {% if item.isForce == true %}
                            是
                            {% elseif item.isForce == false %}
                            否
                            {% else %}
                            {% endif %}
                        </td>
                        <div style="position: relative;">
                            <a href="/version/mcht" class="btn btn-info"
                               style="position: absolute;right: 26%;top: 0;">返回</a>
                            {{ forms.submit() }}
                        </div>
                    </form>
                </div>
            </div>
        </div>

    </div>
    {% endblock %}

    {#js代码#}
    {% block js %}
    <script>
      $(function () {
        var e = "";
        $("#form").validate({
          rules: {
            mobile: "required",
            email: "required",
            salt: "required",
            password: "required",
            tradePassword: "required",
            name: "required",
            nickName: "required",
            avatar: "required",
            regip: "required",
            status: "required",
            sex: "required",
            memo: "required",
            regtime: "required",
            updateTime: "required",
            points: "required",
            freezePoints: "required",
            money: "required",
            freezeMoney: "required",
            openid: "required",
            unionid: "required",
            nickname: "required",
          },
          messages: {
            mobile: {
              required: e + "请输入手机号"
            },
            email: {
              required: e + "请输入电子邮箱"
            },
            salt: {
              required: e + "请输入salt"
            },
            password: {
              required: e + "请输入登录密码"
            },
            tradePassword: {
              required: e + "请输入交易密码"
            },
            name: {
              required: e + "请输入姓名"
            },
            nickName: {
              required: e + "请输入昵称"
            },
            avatar: {
              required: e + "请输入头像"
            },
            regip: {
              required: e + "请输入注册ip"
            },
            status: {
              required: e + "请输入是否可用"
            },
            sex: {
              required: e + "请输入性别"
            },
            memo: {
              required: e + "请输入备注"
            },
            regtime: {
              required: e + "请输入注册时间"
            },
            updateTime: {
              required: e + "请输入更新时间"
            },
            points: {
              required: e + "请输入会员积分"
            },
            freezePoints: {
              required: e + "请输入冻结积分"
            },
            money: {
              required: e + "请输入可用金额"
            },
            freezeMoney: {
              required: e + "请输入冻结金额"
            },
            openid: {
              required: e + "请输入微信openid"
            },
            unionid: {
              required: e + "请输入微信unionid"
            },
            nickname: {
              required: e + "请输入昵称"
            },
          },
          submitHandler: function() {
            asyncSubmitForm($("#form"));
          }
        });

      });
    </script>

    {% endblock %}